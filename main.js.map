{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/character/character-image/character-image.component.ts","./src/app/character/character-image/character-image.component.html","./src/app/character/character.component.ts","./src/app/character/character.component.html","./src/app/main-character/main-character.component.ts","./src/app/main-character/main-character.component.html","./src/app/search/search.component.ts","./src/app/search/search.component.html","./src/app/wikidata.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {MainCharacterComponent} from './main-character/main-character.component';\nimport {SearchComponent} from './search/search.component';\n\n\nconst routes: Routes = [\n  { path: ':id', component: MainCharacterComponent },\n  { path: '', component: SearchComponent },\n  { path: '**', redirectTo: '' },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { relativeLinkResolution: 'legacy' })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'Wikidata Genealogical Tree Viewer';\n}\n","<h1 class=\"h1 container text-center title\" [routerLink]=\"['/']\">\n  <a >{{ title }}</a>\n</h1>\n\n<router-outlet></router-outlet>\n\n<a href=\"https://www.wikidata.org\" class=\"wikidata-pin\">\n  <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Wikidata_stamp.png/1024px-Wikidata_stamp.png\">\n</a>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { CharacterComponent } from './character/character.component';\nimport {HttpClientModule} from '@angular/common/http';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { CharacterImageComponent } from './character/character-image/character-image.component';\nimport { AppRoutingModule } from './app-routing.module';\nimport {MainCharacterComponent} from './main-character/main-character.component';\nimport {FormsModule} from '@angular/forms';\nimport { SearchComponent } from './search/search.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    CharacterComponent,\n    CharacterImageComponent,\n    MainCharacterComponent,\n    SearchComponent,\n  ],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    NgbModule,\n    AppRoutingModule,\n    FormsModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import {Component, Input, OnInit} from '@angular/core';\nimport {WikidataService} from '../../wikidata.service';\nimport {Observable} from 'rxjs';\n\n@Component({\n  selector: 'app-character-image',\n  templateUrl: './character-image.component.html',\n  styleUrls: ['./character-image.component.scss']\n})\nexport class CharacterImageComponent implements OnInit {\n  @Input() imageName: string;\n  imageUrl$: Observable<any>;\n\n  constructor(private wikidata: WikidataService) { }\n\n  ngOnInit(): void {\n    this.imageUrl$ = this.wikidata.getImageUrl(this.imageName);\n  }\n}\n","<ng-container *ngIf=\"imageUrl$ | async as imageUrl\">\n  <img [src]=\"imageUrl.imageinfo[0].url\" class=\"character-img\">\n</ng-container>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {WikidataService} from '../wikidata.service';\nimport {Observable} from 'rxjs';\nimport {Router} from '@angular/router';\n\n@Component({\n  selector: 'app-character',\n  templateUrl: './character.component.html',\n  styleUrls: ['./character.component.scss']\n})\nexport class CharacterComponent implements OnInit {\n  @Input() characterId: string;\n  @Input() maxDepth = 5;\n  @Input() depth = 0;\n  @Input() locale = 'en';\n\n  character$: Observable<any>;\n\n  constructor(private wikidata: WikidataService, private router: Router) { }\n\n  ngOnInit(): void {\n    this.character$ = this.wikidata.getEntity(this.characterId);\n  }\n\n  labelsLocale(labels): any {\n    return labels[this.locale] ?? labels.en ?? labels[Object.keys(labels)[0]];\n  }\n\n  navigate(entityId): void {\n    this.router.routeReuseStrategy.shouldReuseRoute = () => false;\n    this.router.onSameUrlNavigation = 'reload';\n    this.router.navigate([entityId], {\n      queryParams: {depth: this.maxDepth, locale: this.locale}\n    }).then();\n  }\n}\n","<ng-container *ngIf=\"character$ | async as character\">\n  <li>\n    <a (click)=\"navigate(character.id)\">\n      {{ labelsLocale(character.labels).value }}\n      <ng-container *ngIf=\"character.claims['P18'] as images\">\n        <ng-container *ngIf=\"images[0].mainsnak.datavalue as datavalue\">\n          <app-character-image [imageName]=\"datavalue.value\"></app-character-image>\n        </ng-container>\n      </ng-container>\n    </a>\n\n    <ul *ngIf=\"depth < maxDepth && character.claims['P40'] as childrenProp\">\n      <li *ngFor=\"let childProp of childrenProp\">\n        <!-- TODO FILTER-->\n        <app-character [depth]=\"depth + 1\" [locale]=\"locale\" [maxDepth]=\"maxDepth\" [characterId]=\"childProp.mainsnak.datavalue.value.id\"></app-character>\n      </li>\n    </ul>\n  </li>\n</ng-container>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {ActivatedRoute, ParamMap} from '@angular/router';\nimport {switchMap} from 'rxjs/operators';\nimport {Observable, of} from 'rxjs';\n\n@Component({\n  selector: 'app-main-character',\n  templateUrl: './main-character.component.html',\n  styleUrls: ['./main-character.component.scss']\n})\nexport class MainCharacterComponent implements OnInit {\n  characterId$: Observable<string>;\n  options$: Observable<any>;\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    this.characterId$ = this.route.paramMap.pipe(\n      switchMap(params => params.getAll('id'))\n    );\n    this.options$ = this.route.queryParamMap.pipe(\n      switchMap(function (params) {\n        return of({\n          depth: params.get('depth'),\n          locale: params.get('locale'),\n        });\n      }));\n    console.log(this.options$);\n  }\n}\n","<ng-container *ngIf=\"characterId$ | async as characterId\">\n  <ng-container *ngIf=\"options$ | async as options\">\n    <div class=\"tree aled\">\n      <ul>\n        <app-character [maxDepth]=\"options.depth\" [locale]=\"options.locale\" [characterId]=\"characterId\"></app-character>\n      </ul>\n    </div>\n  </ng-container>\n</ng-container>\n","import { Component, OnInit } from '@angular/core';\nimport {Router} from '@angular/router';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss']\n})\nexport class SearchComponent {\n  constructor(private router: Router) { }\n\n  entity = 'Q159575';\n  depth = 5;\n  locale: string;\n  navigate(): void {\n    this.router.routeReuseStrategy.shouldReuseRoute = () => false;\n    this.router.onSameUrlNavigation = 'reload';\n    this.router.navigate([this.entity], {\n      queryParams: {depth: this.depth, locale: this.locale}\n    }).then();\n  }\n}\n","<div class=\"container filter-container\">\n  <form (submit)=\"navigate()\">\n    <div class=\"form-group\">\n      <label>\n        Wikidata Entity Id\n      </label>\n      <input class=\"form-control\" [(ngModel)]=\"entity\" [ngModelOptions]=\"{standalone: true}\">\n    </div>\n    <div class=\"form-group\">\n      <label>\n        Number of generations\n      </label>\n      <input class=\"form-control\" placeholder=\"depth\" type=\"number\" [(ngModel)]=\"depth\" [ngModelOptions]=\"{standalone: true}\">\n    </div>\n    <div class=\"form-group\">\n      <label>\n        Locale\n      </label>\n      <input class=\"form-control\" placeholder=\"en, fr, ...\" [(ngModel)]=\"locale\" [ngModelOptions]=\"{standalone: true}\">\n    </div>\n    <input class=\"btn btn-primary\" type=\"submit\">\n  </form>\n</div>\n","import { Injectable } from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WikidataService {\n\n  constructor(private http: HttpClient) { }\n\n  getEntity(entityId: string): Observable<any>\n  {\n    return this.http.get<any>(`https://www.wikidata.org/wiki/Special:EntityData/${entityId}.json`).pipe(\n      map(x => x.entities[entityId])\n    );\n  }\n\n  getImageUrl(imageName): Observable<any> {\n    return this.http.get<any>(`https://commons.wikimedia.org/w/api.php?action=query&format=json&prop=imageinfo&iiprop=url`,\n      {params: {\n          titles: `File:${imageName}`,\n          origin: '*'\n        }}).pipe(\n      map(x => x.query.pages[Object.keys(x.query.pages)[0]])\n    );\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":[],"sourceRoot":"webpack:///"}